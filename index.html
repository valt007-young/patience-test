<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STAY STILL</title>
<style>
html,body{
  margin:0;
  padding:0;
  height:100%;
  font-family:system-ui, sans-serif;
  background:#f6f6f6;
  color:#222;
}
#wrap{
  height:100%;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  padding:20px;
}
h1{
  font-weight:500;
  letter-spacing:2px;
}
#msg{
  margin:20px 0;
  font-size:1rem;
  min-height:40px;
}
#circle{
  width:140px;
  height:140px;
  border-radius:50%;
  border:3px solid #ccc;
  margin:30px 0;
  transition:all .4s;
}
button{
  padding:14px 40px;
  font-size:1rem;
  background:white;
  border:2px solid #222;
  border-radius:30px;
}
button:active{
  background:#222;
  color:white;
}
.hidden{display:none}
.shake{
  animation:shake .25s;
}
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-3px)}
  50%{transform:translateX(3px)}
  75%{transform:translateX(-3px)}
  100%{transform:translateX(0)}
}
</style>
</head>
<body>

<div id="wrap">
  <h1>STAY STILL</h1>
  <div id="msg">Observe.</div>
  <div id="circle"></div>
  <button id="btn">Tap</button>
</div>

<script>
const msg=document.getElementById("msg");
const btn=document.getElementById("btn");
const circle=document.getElementById("circle");

let alive=true;
let start=Date.now();
let taps=0;
let dangerWindow=false;
let silenceTimer;

function fail(reason){
  if(!alive) return;
  alive=false;
  document.body.classList.add("shake");
  setTimeout(()=>{
    const score=((Date.now()-start)/1000).toFixed(2);
    msg.innerText="Failed.\nTime: "+score+"s";
    btn.innerText="Restart";
  },400);
}

function randomPhase(){
  if(!alive) return;
  dangerWindow=Math.random()>0.7;
  circle.style.borderColor=dangerWindow?"#aaa":"#ddd";

  const texts=[
    "Wait.",
    "Stillness matters.",
    "Now is not the moment.",
    "Observe the circle.",
    "Breathe.",
    "Do nothing."
  ];
  msg.innerText=texts[Math.floor(Math.random()*texts.length)];

  silenceTimer=setTimeout(()=>{
    if(Math.random()>0.9) fail("Inaction bias");
  },4000+Math.random()*4000);
}

btn.onclick=()=>{
  if(!alive){
    location.reload();
    return;
  }
  taps++;
  clearTimeout(silenceTimer);

  if(dangerWindow) fail("Impulse detected");
  if(taps>2 && Math.random()>0.6) fail("Overcontrol");

  circle.style.borderColor="#222";
  msg.innerText="Not yet.";
};

setInterval(randomPhase,5000);
randomPhase();
</script>

</body>
</html>
